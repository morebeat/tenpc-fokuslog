<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neuer Eintrag - FokusLog</title>
    <link rel="stylesheet" href="style.css">
</head>
<body data-page="entry" class="app-page">
    <header class="app-header">
        <div class="logo">
            <h1>FokusLog</h1>
        </div>
        <nav>
            <a href="dashboard.html" class="button button-secondary">Dashboard</a>
        </nav>
    </header>
    <main class="entry-main">
        <h2 class="page-title">Neuer Eintrag</h2>
        <form id="entry-form" class="entry-form-container">
            <div class="form-card">
                <h3>Basisdaten</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="date">Datum:</label>
                        <input type="date" id="date" name="date" required>
                    </div>
                    <div class="form-group">
                        <label for="time">Tageszeit:</label>
                        <select id="time" name="time" required>
                            <option value="morning">Morgen</option>
                            <option value="noon">Mittag</option>
                            <option value="evening">Abend</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="medication_id">Medikament:</label>
                        <select id="medication_id" name="medication_id">
                            <option value="" disabled selected>Bitte wÃ¤hlen</option>
                            <option value="0">Kein Medikament</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="weight">Gewicht (kg):<a href="help/gewicht.html" target="_blank" class="help-link" title="Hilfe zum Thema Gewicht">?</a></label>
                        <select id="weight" name="weight">
                            <option value="">Keine Angabe</option>
                        </select>
                        <script>
                            const weightSelect = document.getElementById('weight');
                            if (weightSelect) {
                                for (let i = 10; i <= 150; i += 0.5) {
                                    let opt = document.createElement('option');
                                    opt.value = i.toFixed(2); // Format: 10.00
                                    opt.textContent = i.toFixed(1).replace('.', ',') + ' kg';
                                    weightSelect.appendChild(opt);
                                }
                            }
                        </script>
                    </div>
                </div>
            </div>

            <div class="form-card">
                <h3>Wie war es?</h3>
                <div class="rating-grid">
                    <div class="rating-section" data-scale="sleep" data-help-url="help/schlaf.html" data-help-label="SchlafqualitÃ¤t">
                        <label>SchlafqualitÃ¤t (1=Schlecht, 5=Super)<a href="help/schlaf.html" target="_blank" class="help-link" title="Hilfe zum Thema Schlaf">?</a></label>
                        <div class="rating-group">
                            <input type="radio" name="sleep" value="1" id="sleep-1"><label for="sleep-1">ğŸ˜«</label>
                            <input type="radio" name="sleep" value="2" id="sleep-2"><label for="sleep-2">ğŸ˜•</label>
                            <input type="radio" name="sleep" value="3" id="sleep-3"><label for="sleep-3">ğŸ˜</label>
                            <input type="radio" name="sleep" value="4" id="sleep-4"><label for="sleep-4">ğŸ™‚</label>
                            <input type="radio" name="sleep" value="5" id="sleep-5"><label for="sleep-5">ğŸ¤©</label>
                        </div>
                        <p class="help-hint hidden" aria-live="polite"></p>
                    </div>
                    <div class="rating-section" data-scale="mood" data-help-url="help/stimmung.html" data-help-label="Stimmung">
                        <label>Stimmung<a href="help/stimmung.html" target="_blank" class="help-link" title="Hilfe zum Thema Stimmung">?</a></label>
                        <div class="rating-group">
                            <input type="radio" name="mood" value="1" id="mood-1"><label for="mood-1">ğŸ˜­</label>
                            <input type="radio" name="mood" value="2" id="mood-2"><label for="mood-2">ğŸ˜¢</label>
                            <input type="radio" name="mood" value="3" id="mood-3"><label for="mood-3">ğŸ˜</label>
                            <input type="radio" name="mood" value="4" id="mood-4"><label for="mood-4">ğŸ™‚</label>
                            <input type="radio" name="mood" value="5" id="mood-5"><label for="mood-5">ğŸ˜</label>
                        </div>
                        <p class="help-hint hidden" aria-live="polite"></p>
                    </div>
                    <div class="rating-section" data-scale="focus" data-help-url="help/fokus.html" data-help-label="Konzentration &amp; Fokus">
                        <label>Konzentration / Fokus<a href="help/fokus.html" target="_blank" class="help-link" title="Hilfe zum Thema Fokus">?</a></label>
                        <div class="rating-group">
                            <input type="radio" name="focus" value="1" id="focus-1"><label for="focus-1">ğŸ’¨</label>
                            <input type="radio" name="focus" value="2" id="focus-2"><label for="focus-2">â˜ï¸</label>
                            <input type="radio" name="focus" value="3" id="focus-3"><label for="focus-3">ğŸ˜</label>
                            <input type="radio" name="focus" value="4" id="focus-4"><label for="focus-4">ğŸ’¡</label>
                            <input type="radio" name="focus" value="5" id="focus-5"><label for="focus-5">ğŸ¯</label>
                        </div>
                        <p class="help-hint hidden" aria-live="polite"></p>
                    </div>
                    <div class="rating-section" data-scale="hyperactivity" data-help-url="help/hyperaktivitaet.html" data-help-label="Innere Unruhe &amp; HyperaktivitÃ¤t">
                        <label>Innere Unruhe / HyperaktivitÃ¤t<a href="help/hyperaktivitaet.html" target="_blank" class="help-link" title="Hilfe zum Thema HyperaktivitÃ¤t">?</a></label>
                        <div class="rating-group">
                            <input type="radio" name="hyperactivity" value="1" id="hyp-1"><label for="hyp-1">ğŸŒªï¸</label>
                            <input type="radio" name="hyperactivity" value="2" id="hyp-2"><label for="hyp-2">âš¡</label>
                            <input type="radio" name="hyperactivity" value="3" id="hyp-3"><label for="hyp-3">ğŸ˜</label>
                            <input type="radio" name="hyperactivity" value="4" id="hyp-4"><label for="hyp-4">ğŸ˜Œ</label>
                            <input type="radio" name="hyperactivity" value="5" id="hyp-5"><label for="hyp-5">ğŸ§˜</label>
                        </div>
                        <p class="help-hint hidden" aria-live="polite"></p>
                    </div>
                    <div class="rating-section" data-scale="irritability" data-help-url="help/reizbarkeit.html" data-help-label="Reizbarkeit">
                        <label>Reizbarkeit<a href="help/reizbarkeit.html" target="_blank" class="help-link" title="Hilfe zum Thema Reizbarkeit">?</a></label>
                        <div class="rating-group">
                            <input type="radio" name="irritability" value="1" id="irr-1"><label for="irr-1">ğŸ˜¡</label>
                            <input type="radio" name="irritability" value="2" id="irr-2"><label for="irr-2">ğŸ˜ </label>
                            <input type="radio" name="irritability" value="3" id="irr-3"><label for="irr-3">ğŸ˜</label>
                            <input type="radio" name="irritability" value="4" id="irr-4"><label for="irr-4">ğŸ™‚</label>
                            <input type="radio" name="irritability" value="5" id="irr-5"><label for="irr-5">ğŸ•Šï¸</label>
                        </div>
                        <p class="help-hint hidden" aria-live="polite"></p>
                    </div>
                    <div class="rating-section" data-scale="appetite" data-help-url="help/appetit.html" data-help-label="Appetit">
                        <label>Appetit<a href="help/appetit.html" target="_blank" class="help-link" title="Hilfe zum Thema Appetit">?</a></label>
                        <div class="rating-group">
                            <input type="radio" name="appetite" value="1" id="app-1"><label for="app-1">ğŸ¤¢</label>
                            <input type="radio" name="appetite" value="2" id="app-2"><label for="app-2">ğŸ¤</label>
                            <input type="radio" name="appetite" value="3" id="app-3"><label for="app-3">ğŸ˜</label>
                            <input type="radio" name="appetite" value="4" id="app-4"><label for="app-4">ğŸ˜‹</label>
                            <input type="radio" name="appetite" value="5" id="app-5"><label for="app-5">ğŸ½ï¸</label>
                        </div>
                        <p class="help-hint hidden" aria-live="polite"></p>
                    </div>
                </div>
            </div>

            <div class="form-card">
                <h3>Tags & Notizen</h3>
                <div class="form-group">
                    <label>Tags / Kategorien</label>
                    <div id="tags-selection-container" class="tags-container">
                        <p style="font-style: italic; color: #666; margin: 0;">Keine Tags definiert.</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="side_effects">Nebenwirkungen:</label>
                    <textarea id="side_effects" name="side_effects" rows="2"></textarea>
                </div>
                <div class="form-group">
                    <label for="other_effects">Sonstige Wirkungen / Beobachtungen:</label>
                    <textarea id="other_effects" name="other_effects" rows="2"></textarea>
                </div>
                <details class="details-accordion">
                    <summary>Weitere Felder (Schule, Ereignisse)...</summary>
                    <div class="details-content form-grid">
                        <div class="form-group">
                            <label for="teacher_feedback">RÃ¼ckmeldung Schule/Lehrer:</label>
                            <textarea id="teacher_feedback" name="teacher_feedback" rows="2"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="special_events">Besondere Ereignisse:</label>
                            <textarea id="special_events" name="special_events" rows="2"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="emotional_reactions">Emotionale Reaktionen:</label>
                            <textarea id="emotional_reactions" name="emotional_reactions" rows="2"></textarea>
                        </div>
                    </div>
                </details>
            </div>

            <div id="message-container" class="error-message hidden"></div>
            
            <div class="form-actions">
                <button type="submit" class="button button-primary">Speichern</button>
                <button type="button" id="btn-delete-entry" class="button button-danger hidden">Eintrag lÃ¶schen</button>
            </div>
        </form>
    </main>
    <script src="js/utils/common.js"></script>
    <script src="js/app.js"></script>
</body>
</html>